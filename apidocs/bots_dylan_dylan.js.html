<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: bots/dylan/dylan.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: bots/dylan/dylan.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Dylan's bot
 * 
 */
var dylan = new Bot(1021, 1000, 'dylan', 'js/bots/dylan/player_car.png');

/**
 * State variable
 */
dylan.currentMotion = Motions.still;

/**
 * Initialize bot
 * @override
 */
dylan.init = function() {
    this.body = this.sprite.body;
    this.body.rotation = 100;
    this.body.speed = 100;

    game.time.events.loop(Phaser.Timer.SECOND * 1, dylan.update1Sec, this);
    game.time.events.loop(Phaser.Timer.SECOND * 5, dylan.update5Sec, this);
    game.time.events.loop(Phaser.Timer.SECOND * 60 * 4, dylan.update4min, this);


}



dylan.emotions = new MarkovProcess("Calm");
dylan.emotions.add("Calm", [
    ["Calm", "Happy", "Angry", "Sad"],
    [.8, .1, .05, .05]
]);
dylan.emotions.add("Sad", [
    ["Sad", "Calm"],
    [.7, .3]
]);
dylan.emotions.add("Angry", [
    ["Angry", "Calm"],
    [.5, .5]
]);
dylan.emotions.add("Happy", [
    ["Happy", "Calm"],
    [.7, .3]
]);
dylan.emotions.add("Playful," [
    ["Happy", "Calm"],
    [.8, .6]
]);
dylan.emotions.add("Scared," [
    ["Nervous", "Calm"],
    [.7, .3]
]);
dylan.emotions.add("Nervous," [
    ["Scared", "Calm"],
    [.5, .5]
]);

/**
 * Hunger/fuel variable
 */
dylan.fuel = new DecayVariable(0, 1, 0, 100);
dylan.fuel.toString = function() {
    var fuelLevel = "";
    if (this.amount &lt; 20) {
        fuelLevel = "Tank full";
    } else if (this.amount &lt; 60) {
        fuelLevel = "Half tank";
    } else if (this.amount &lt; 80) {
        fuelLevel = "FUEL LOW";
    } else {
        fuelLevel = "FUEL DEPLETION IMMENENT";
    }
    return fuelLevel + " (Fuel = " + this.value + ")";
}

dylan.getStatus = function() {
        var statusString = "Emotion: " + dylan.emotions.current;
        statusString += "\nMotion: " + dylan.currentMotion.description;
        statusString += "\n" + dylan.fuel.toString();
        return statusString;
    }
    /**
     * Populate the status field
     *
     * @override
     */
dylan.setMotion = function() {

    // Default markov chain movement patterns
    // TODO: Add conditions that involve hunger, etc.
    if (dylan.emotions.current === "Sad") {
        dylan.currentMotion = Motions.moping;
    } else if (dylan.emotions.current === "Happy") {
        dylan.currentMotion = Motions.walking;
    } else if (dylan.emotions.current === "Calm") {
        let rnd = Math.random();
        if (rnd &lt; .5) {
            dylan.currentMotion = Motions.still;
        } else {
            dylan.currentMotion = Motions.walking;
        }
    } else if (dylan.emotions.current === "Angry") {
        dylan.currentMotion = Motions.speeding;
    } else if (dylan.emotions.cruuent === "Playful") {
        dylan.currentMotion = Motions.weaving;
    } else if (dylan.emotions.current === "Nervous") {
        dylan.currentMotion = Motions.moping;
    } else if (dylan.emotions.current === "Scared") {
        dylan.currentMotion = Motions.speeding;
    }
}

/**
 * Main updaye called by the phaser game object
 *
 * @override
 */
dylan.update = function() {

    // Apply current motion
    this.currentMotion.apply(dylan);
    // "Superclass" update method
    dylan.genericUpdate();
};



dylan.update1Sec = function() {
    dylan.fuel.increment();
    dylan.emotions.update();
    dylan.setMotion();
}



dylan.update5Sec = function() {

}

dylan.update4min = function() {

}


/**
 * React to a collision.
 *
 * @override
 */

dylan.collision = function(object) {
    // console.log("Object is edible: " + object.isEdible);
    if (object.isEdible) {
        dylan.eatObject(object);
    } else {
        dylan.speak(object, "Move aside " + object.name);
    }


}

/**
 * Call this when eating
 * @param {Entitiy} objectToEat what to eat
 */

dylan.eatObject = function(objectToEat) {
        objectToEat.eat();
        dylan.fuel.subtract(objectToEat.calories);
        dylan.speak(objectToEat, "Weird, I don't usually eat " + objectToEat.description);
    }
    /**
     * Reaction to hearing something
     * @param  {bot} botWhoSpokeToMe the bot talking to this one
     * @param  {String} whatTheySaid    what they said
     * 
     */
dylan.hear = function(botWhoSpokeToMe, whatTheySaid) {
        dylan.speak(botWhoSpokeToMe, "Alright " + botWhoSpokeToMe.name); // TODO: Make more intelligent responses!
    }
    /**
     * React when someone high fives me
     *
     * @override
     */
dylan.highFived = function(botWhoHighFivedMe) {
    dylan.speak(botWhoHighFivedMe, "Hey what's up " + botWhoHighFivedMe.name + ".");
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Bot.html">Bot</a></li><li><a href="yang.html">yang</a></li></ul><h3>Namespaces</h3><ul><li><a href="Jeff.html">Jeff</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addFoodItem">addFoodItem</a></li><li><a href="global.html#create">create</a></li><li><a href="global.html#DecayVariable">DecayVariable</a></li><li><a href="global.html#dylan">dylan</a></li><li><a href="global.html#faust">faust</a></li><li><a href="global.html#fireProductions">fireProductions</a></li><li><a href="global.html#loadSpeechBubbleAssets">loadSpeechBubbleAssets</a></li><li><a href="global.html#MarkovProcess">MarkovProcess</a></li><li><a href="global.html#Motions">Motions</a></li><li><a href="global.html#Production">Production</a></li><li><a href="global.html#setUpFood">setUpFood</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Mar 15 2016 21:58:02 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
